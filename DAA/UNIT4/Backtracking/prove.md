
# Proof: State Space Tree Size for Sum of Subsets

## Problem Statement
**Proposition:** Prove that the full state space tree generated by the backtracking algorithm for finding the sum of subsets of $n$ elements contains exactly $2^n - 1$ internal nodes (excluding leaf nodes).

---

## 1. Context and Definitions
* **Problem:** Sum of Subsets involves selecting a subset of elements from a given set $\{w_1, w_2, \dots, w_n\}$ such that their sum equals a target value.
* **Approach:** Backtracking.
* **State Space Tree Structure:** The problem is modeled as a **Binary Tree** (specifically, a full binary tree if we consider the complete exhaustive search without pruning).
* **Decision at each node:** At every level $i$ (where $1 \le i \le n$), a binary decision is made for element $w_i$:
    1.  **Left Branch ($x_i = 1$):** Include element $w_i$ in the subset.
    2.  **Right Branch ($x_i = 0$):** Exclude element $w_i$ from the subset.

---

## 2. Visual Representation
The tree grows by depth. At depth $n$, we have made decisions for all $n$ items, resulting in the leaf nodes (final subsets).

```mermaid
graph TD
    Root((Start)) --> L1_1((x1=1))
    Root --> L1_0((x1=0))
    L1_1 --> L2_1((x2=1))
    L1_1 --> L2_2((x2=0))
    L1_0 --> L2_3((x2=1))
    L1_0 --> L2_4((x2=0))
    
    style Root fill:#f9f,stroke:#333,stroke-width:2px
    style L1_1 fill:#fff,stroke:#333
    style L1_0 fill:#fff,stroke:#333
    style L2_1 fill:#ccc,stroke:#333,stroke-dasharray: 5 5
    style L2_2 fill:#ccc,stroke:#333,stroke-dasharray: 5 5
    style L2_3 fill:#ccc,stroke:#333,stroke-dasharray: 5 5
    style L2_4 fill:#ccc,stroke:#333,stroke-dasharray: 5 5
````

*Note: In the diagram above, the solid nodes represent internal nodes (decisions made), and the dashed/shaded nodes represent the next level (eventually leading to leaves).*

-----

## 3\. Mathematical Proof

### Step 1: Analyze Nodes at Each Level

The tree starts at Level 0 (Root).

  * **Level 0:** $1$ node (Root). ($2^0$)
  * **Level 1:** $2$ nodes (Decision for $w_1$). ($2^1$)
  * **Level 2:** $4$ nodes (Decision for $w_2$). ($2^2$)
  * ...
  * **Level $k$:** $2^k$ nodes.

### Step 2: Identify Leaf vs. Internal Nodes

For a set of $n$ elements, the tree has a depth of $n$.

  * **Leaf Nodes:** Occur at **Level $n$**. These represent the completed subsets (the Power Set).
      * Count of Leaf Nodes = $2^n$.
  * **Internal Nodes:** These are the nodes where further recursive calls are made. They exist from **Level 0 to Level $n-1$**.

### Step 3: Summation of Internal Nodes

To find the total number of nodes excluding the leaves, we sum the nodes from Level 0 to $n-1$.

$$ \text{Total Internal Nodes} = \sum_{i=0}^{n-1} 2^i $$

This is a **Geometric Progression (G.P.)** series where:

  * First term $a = 1$ ($2^0$)
  * Common ratio $r = 2$
  * Number of terms $= n$

Using the G.P. sum formula $S_n = \frac{a(r^n - 1)}{r - 1}$:

$$ \sum_{i=0}^{n-1} 2^i = \frac{1 \cdot (2^n - 1)}{2 - 1} $$

$$ \sum_{i=0}^{n-1} 2^i = \frac{2^n - 1}{1} $$

$$ \mathbf{\text{Total Internal Nodes} = 2^n - 1} $$

-----

## 4\. Conclusion

We have calculated that the sum of nodes across all levels excluding the final leaf level is exactly $2^n - 1$. Thus, the proposition is proven.

```
