
# Proof: State Space Tree Size for Sum of Subsets

## Problem Statement
**Proposition:** Prove that the full state space tree generated by the backtracking algorithm for finding the sum of subsets of $n$ elements contains exactly $2^n - 1$ internal nodes (excluding leaf nodes).

---

## 1. Context and Definitions
* **Problem:** Sum of Subsets involves selecting a subset of elements from a given set $\{w_1, w_2, \dots, w_n\}$ such that their sum equals a target value.
* **Approach:** Backtracking.
* **State Space Tree Structure:** The problem is modeled as a **Binary Tree** (specifically, a full binary tree if we consider the complete exhaustive search without pruning).
* **Decision at each node:** At every level $i$ (where $1 \le i \le n$), a binary decision is made for element $w_i$:
    1.  **Left Branch ($x_i = 1$):** Include element $w_i$ in the subset.
    2.  **Right Branch ($x_i = 0$):** Exclude element $w_i$ from the subset.

---

## 2. Visual Representation
The tree grows by depth. At depth $n$, we have made decisions for all $n$ items, resulting in the leaf nodes (final subsets).

```mermaid

graph TD
    Root((Start)) --> L1_1((x1=1))
    Root --> L1_0((x1=0))
    L1_1 --> L2_1((x2=1))
    L1_1 --> L2_2((x2=0))
    L1_0 --> L2_3((x2=1))
    L1_0 --> L2_4((x2=0))
    
    style Root fill:#9c27b0,stroke:#333,stroke-width:2px 
    style L1_1 fill:#fff,stroke:#333  
    style L1_0 fill:#fff,stroke:#333  
    style L2_1 fill:#f5f5f5,stroke:#333,stroke-dasharray: 5 5  
    style L2_2 fill:#f5f5f5,stroke:#333,stroke-dasharray: 5 5   
    style L2_3 fill:#f5f5f5,stroke:#333,stroke-dasharray: 5 5
    style L2_4 fill:#f5f5f5,stroke:#333,stroke-dasharray: 5 5 

````

*Note: In the diagram above, the solid nodes represent internal nodes (decisions made), and the dashed/shaded nodes represent the next level (eventually leading to leaves).*

-----

## 3\. Mathematical Proof

### Step 1: Analyze Nodes at Each Level

The tree starts at Level 0 (Root).

  * **Level 0:** $1$ node (Root). ($2^0$)
  * **Level 1:** $2$ nodes (Decision for $w_1$). ($2^1$)
  * **Level 2:** $4$ nodes (Decision for $w_2$). ($2^2$)
  * ...
  * **Level $k$:** $2^k$ nodes.

### Step 2: Identify Leaf vs. Internal Nodes

For a set of $n$ elements, the tree has a depth of $n$.

  * **Leaf Nodes:** Occur at **Level $n$**. These represent the completed subsets (the Power Set).
      * Count of Leaf Nodes = $2^n$.
  * **Internal Nodes:** These are the nodes where further recursive calls are made. They exist from **Level 0 to Level $n-1$**.

### Step 3: Summation of Internal Nodes

To find the total number of nodes excluding the leaves, we sum the nodes from Level 0 to $n-1$.

$$ \text{Total Internal Nodes} = \sum_{i=0}^{n-1} 2^i $$

This is a **Geometric Progression (G.P.)** series where:

  * First term $a = 1$ ($2^0$)
  * Common ratio $r = 2$
  * Number of terms $= n$

Using the G.P. sum formula $S_n = \frac{a(r^n - 1)}{r - 1}$:

$$ \sum_{i=0}^{n-1} 2^i = \frac{1 \cdot (2^n - 1)}{2 - 1} $$

$$ \sum_{i=0}^{n-1} 2^i = \frac{2^n - 1}{1} $$

$$ \mathbf{\text{Total Internal Nodes} = 2^n - 1} $$

-----

## 4\. Conclusion

We have calculated that the sum of nodes across all levels excluding the final leaf level is exactly $2^n - 1$. Thus, the proposition is proven.



---

# **Proof: Full State Space Tree for Subset Sum Has (2^n - 1) Non-Leaf Nodes**

### **Problem Context (Backtracking – Sum of Subsets)**

* We are given a set of ( n ) elements:
  [
  S = {a_1, a_2, \dots, a_n}
  ]
* Using **backtracking**, we generate **all subsets** of ( S ) to check which of them satisfy the **sum-of-subsets** condition.
* At each step, for element ( a_k ), we decide:

  * **Include** ( a_k ), or
  * **Exclude** ( a_k ).

This decision process is represented as a **state space tree**.

---

## **1. Structure of the State Space Tree**

1. The tree is a **binary tree**:

   * Each internal node has **exactly 2 children**:

     * *Left child* → Include current element
     * *Right child* → Exclude current element
2. The tree has **levels** from ( 0 ) to ( n ):

   * **Level 0**: Root (no decision made yet)
   * **Level 1**: Decision about ( a_1 )
   * **Level 2**: Decision about ( a_2 )
   * ...
   * **Level n**: Decision about ( a_n ) completed → **leaves**
3. Each **root-to-leaf path** corresponds to **one subset** (include/exclude each of the ( n ) elements).

---

## **2. Number of Nodes at Each Level**

We show that:

> At **level ( k )** (where ( 0 \le k \le n )), the tree has ( 2^k ) nodes.

* **Level 0**:
  Only the root → ( 2^0 = 1 ) node.
* **Level 1**:
  Root generates 2 children → ( 2^1 = 2 ) nodes.
* **Level 2**:
  Each of the 2 nodes at level 1 generates 2 children → ( 2^2 = 4 ) nodes.
* In general:
  Each node at level ( k ) produces 2 children at level ( k+1 ), so:
  [
  \text{Nodes at level } k = 2^k
  ]

So:

* Level 0: ( 2^0 ) nodes
* Level 1: ( 2^1 ) nodes
* …
* Level ( n-1 ): ( 2^{n-1} ) nodes
* Level ( n ): ( 2^{n} ) nodes (**leaf nodes**)

---

## **3. Counting Non-Leaf Nodes**

We are asked to find the number of **non-leaf nodes** (i.e., **excluding the leaf nodes**).

* **Leaves** are all nodes at **level ( n )** → number of leaf nodes:
  [
  L = 2^n
  ]
* **Non-leaf nodes** are all nodes from **level 0 to level ( n-1 )**.

So, total non-leaf nodes ( N ) is:
[
N = \sum_{k=0}^{n-1} 2^k
]

This is a **geometric series**:

[
\sum_{k=0}^{n-1} 2^k = 2^n - 1
]

Therefore:
[
\boxed{N = 2^n - 1}
]

So, the **full state space tree** (excluding leaf nodes) has **( 2^n - 1 ) non-leaf nodes**.

---

## **4. Alternative Argument (Using Full Binary Tree Property)**

* The state space tree is a **full binary tree**:

  * Every **internal node** has **exactly 2 children**.
* In any full binary tree:
  [
  \text{Number of internal nodes} = \text{Number of leaves} - 1
  ]
* Here, number of leaves ( = 2^n ), hence:
  [
  \text{Internal (non-leaf) nodes} = 2^n - 1
  ]

---

## **5. Small Diagram (Example for ( n = 3 ))**

```text
                 Level 0
                   (root)
                     ●
                   /   \
        Level 1   ●     ●
                /  \   /  \
       Level 2 ●   ● ●    ●
              / \ / \ / \ / \
       L3:   ●  ●  ● ●  ● ●  ●  (8 leaves = 2^3)

Non-leaf nodes:
Level 0: 1
Level 1: 2
Level 2: 4
Total non-leaf = 1 + 2 + 4 = 7 = 2^3 - 1
```

---

## **6. Final Conclusion (Exam-Ready Statement)**

> In the sum-of-subsets problem using backtracking, the **full state space tree** is a **binary tree of height ( n )**, where each level ( k ) has ( 2^k ) nodes and the last level has ( 2^n ) leaf nodes.
> Therefore, the **total number of non-leaf nodes** (excluding leaf nodes) is:
> [
> \sum_{k=0}^{n-1} 2^k = 2^n - 1
> ]
> Hence, the full state space tree for finding the sum of subsets of ( n ) elements has **( 2^n - 1 )** non-leaf nodes.

---

